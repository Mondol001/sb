<!DOCTYPE html>
<html lang="bn">
<head>
  <!-- হেডার কন্টেন্ট পূর্বের মতো -->
  <!-- Select2 CSS যোগ করুন -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
</head>
<body>
  <!-- পূর্বের HTML কন্টেন্ট -->

  <!-- Select2 JS যোগ করুন -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

  <script>
    // Select2 ইন্সট্যান্সিয়েট
    $(document).ready(function() {
      $('#employeeSelect').select2({
        placeholder: "কর্মী সার্চ করুন...",
        language: {
          noResults: () => "কোন কর্মী পাওয়া যায়নি",
        }
      });
    });

    // নতুন কর্মী যোগ মডাল
    document.getElementById('newEmployeeForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const email = document.getElementById('newEmployeeEmail').value;
      const password = document.getElementById('newEmployeePassword').value;
      
      try {
        // Firebase Authentication-এ ইউজার তৈরি
        const userCredential = await firebase.auth().createUserWithEmailAndPassword(email, password);
        
        // Firestore-এ ডেটা সেভ
        await db.collection('employees').doc(userCredential.user.uid).set({
          name: document.getElementById('newEmployeeName').value,
          employeeId: document.getElementById('newEmployeeId').value,
          email: email,
          joinDate: firebase.firestore.Timestamp.fromDate(new Date(document.getElementById('newEmployeeJoinDate').value)),
          role: 'employee',
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });

        alert('কর্মী যোগ করা সফল!');
        loadEmployees();
        bootstrap.Modal.getInstance(document.getElementById('newEmployeeModal')).hide();
        document.getElementById('newEmployeeForm').reset();
      } catch (error) {
        alert('ত্রুটি: ' + error.message);
      }
    });
  </script>
</body>
</html>
